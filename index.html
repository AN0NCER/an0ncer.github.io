<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="page" content="index">
    <title>Tunime</title>
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="stylesheet" href="/style/css/main.css">
    <link rel="stylesheet" href="/style/css/index.css">

    <link rel="stylesheet" href="/style/css/min/swiper-bundle.min.css">

    <link rel="manifest" href="manifest.json">
</head>

<body>
    <header>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path
                d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z" />
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path
                d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z" />
        </svg>
    </header>

    <div class="unselectable" style="display: flex;">
        <div class="swiper">
            <!-- Additional required wrapper -->
            <div class="swiper-wrapper">
                <!-- Slides -->
                <div class="swiper-slide">
                    <img src="https://img.rl0.ru/afisha/e630x315p0x0f1260x720q85i/s2.afisha.ru/mediastorage/89/90/9a6f49ac22c042c6b13b44f99089.jpeg"
                        alt="">
                </div>
                <div class="swiper-slide">
                    <img src="https://img.championat.com/s/735x490/news/big/i/c/vyshel-epichnyj-trejler-anime-chelovek-benzopila-k-skoroj-premere-shou_16635894302145291245.jpg"
                        alt="">
                </div>
                <div class="swiper-slide">
                    <img src="https://i1.sndcdn.com/artworks-YcuktyUlKehSXWz1-uoDVjA-t500x500.jpg" alt="">
                </div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>
    </div>

    <div class="block_anim">
        <div class="block_header">
            <div class="block_title">Новые</div>
            <div class="block_more">Развернуть</div>
        </div>
        <div class="block_value">
            <div class="swiper_anim">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper" id="newanime">
                    <!-- Slides -->
                </div>
                <!-- Add Pagination -->
            </div>
        </div>
    </div>

    <div class="block_anim">
        <div class="block_header">
            <div class="block_title">Обновленые</div>
            <div class="block_more">Развернуть</div>
        </div>
    </div>

    <main></main>
    <!--Scripts-->
    <!--Library-->
    <script src="/javascript/library/jqery.min.js"></script>
    <script src="/javascript/library/anime.min.js"></script>
    <script src="/javascript/library/swiper-bundle.min.js"></script>
    <!--Custom library-->
    <script src="/javascript/jsearch.js"></script>
    <script src="/javascript/server.js"></script>
    <script src="/javascript/jmenu.js"></script>
    <script src="/javascript/shikimori.js"></script>
    <script src="/javascript/aspjknml.js"></script>

    <style>
        .swiper {
            width: 100%;
            height: 250px;
            background: #020B26;
            margin-left: 20px;
            margin-right: 20px;
            color: #fff;
            border-radius: 10px;

        }

        .swiper-slide {
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .swiper_anim{
            width: 100%;
            overflow: hidden;
        }

        .swiper-pagination-bullet {
            background: #fff;
            width: 20px;
            border-radius: 3px;
            transition: .3s ease-in-out;
        }

        .swiper-pagination-bullet-active {
            background: #28B2F5;
            width: 8px;
        }

        .swiper-pagination-bullet~.swiper-pagination-bullet-active {
            background: #28B2F5;
            width: 8px;
        }
    </style>
    <script>
        const swiper = new Swiper('.swiper', {
            // Optional parameters
            direction: 'horizontal',
            //slidesPerView: 1,
            loop: true,
            effect: 'slide',
            pagination: {
                el: '.swiper-pagination',
                clickable: false,
            },
        });

        new Swiper('.swiper_anim', {
            // Optional parameters
            direction: 'horizontal',
            slidesPerView: 'auto',
	        spaceBetween: 0,
            //slidesPerView: 1,
            loop: false,
            slideClass: 'swiper-slide-anim',
            coverflowEffect: {
                rotate: 30,
                slideShadows: false,
                scale:.5
            }
        });

        shikimoriUser.Events.oninit(()=>{
            shikimoriApi.Animes.animes({kind:'tv',order:'ranked',status:'ongoing', limit: 8, season: new Date().getFullYear()},async (response)=>{
                for (let index = 0; index < response.length; index++) {
                    const element = response[index];
                    let html = `<div class="swiper-slide-anim"> <a href="${element.id}"> <div class="card_anime"> <img src="https://nyaa.shikimori.one${element.image.original}" alt="${element.russian}"> <div class="card_user"></div> <div class="card_content"> <div class="episodes"> ${element.episodes_aired} Серий </div><div class="title">${element.russian}</div><div class="score"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>${element.score}</div></div></div></a> </div>`;
                    $('#newanime').append(html);
                }
            });
        });

        shikimoriUser.init();
    </script>
</body>

</html>